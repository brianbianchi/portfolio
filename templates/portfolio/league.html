{% extends 'core/base.html' %}
{% load humanize %}
{% block title %}{{league.title}}{% endblock %}

{% block content %}
<div class="border-bottom">
    <h1>{{league.name}}</h1>
    <h3 class="mb-2">{{league.description}}</h3>
    <p class="mb-1">
        Created {{league.created|naturalday}} by
        <a href="/user/{{league.author.username}}">{{league.author.username}}</a>.
    </p>
</div>

<a href="{% url 'create_portfolio' league_id=league.id %}" class="btn btn-primary my-3" role="button">
    Create portfolio
</a>

{% if user == league.author %}
<a href="{% url 'invite' league_id=league.id %}" class="btn btn-primary my-3" role="button">
    Invite user
</a>
{% endif %}

{% if user == league.author %}
<a href="{% url 'edit_league' id=league.id %}" class="btn btn-primary my-3" role="button">Edit</a>
{% endif %}

{% if user == league.author %}
<a href="{% url 'delete_league' id=league.id %}" class="btn btn-danger my-3" role="button">Delete</a>
{% endif %}

<h2>Portfolios</h2>
<table class="table table-striped table-hover">
    <thead>
        <tr>
            <th scope="col">Name</th>
            <th scope="col">League</th>
            <th scope="col">Value</th>
        </tr>
    </thead>
    <tbody>
        {% for portfolio in portfolios %}
        <tr>
            <td>
                <a href="{% url 'view_portfolio' id=portfolio.id %}">
                    {{portfolio.name}}
                </a>
            </td>
            <td>
                <a href="{% url 'view_league' id=portfolio.league.id %}">
                    {{portfolio.league.name}}
                </a>
            </td>
            <td>{{portfolio.value|intcomma}}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<h2>Users</h2>
<table class="table table-striped table-hover">
    <thead>
        <tr>
            <th scope="col">Username</th>
        </tr>
    </thead>
    <tbody>
        {% for league_user in league_users %}
        <tr>
            <td>
                <a href="{% url 'user' name=league_user.user.username %}">
                    {{league_user.user.username}}
                </a>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}